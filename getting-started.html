<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 02 October 2015 
 | Rendered using Apache Maven Fluido Skin 1.4
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Frank Martinez" />
    <meta name="author" content="Eduardo Macarron" />
    <meta name="Date-Revision-yyyymmdd" content="20151002" />
    <meta http-equiv="Content-Language" content="en" />
    <title>MyBatis &#x2013; MyBatis-CDI | Getting Started</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.4.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.4.min.js"></script>

    
                  </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>mybatis-cdi</h2>
                </div>
                      </div>
        <div class="pull-right">                  <a href="http://www.mybatis.org/" id="bannerRight" title="MyBatis logo">
                                                                                        <img src="http://mybatis.github.io/images/mybatis-logo.png"  alt="MyBatis logo"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 02 October 2015
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 1.0.0-beta3
                      </li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Reference Documentation</li>
                              
      <li>
  
                          <a href="index.html" title="Introduction">
          <span class="none"></span>
        Introduction</a>
            </li>
                
      <li class="active">
  
            <a href="#"><span class="none"></span>Getting Started</a>
          </li>
                
      <li>
  
                          <a href="injection.html" title="Injecting beans">
          <span class="none"></span>
        Injecting beans</a>
            </li>
                
      <li>
  
                          <a href="transactions.html" title="Transactions">
          <span class="none"></span>
        Transactions</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                                        
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                                                                                                                                                                                                                                                                                          
      <li>
  
                          <a href="project-reports.html" title="Project Reports">
          <span class="icon-chevron-right"></span>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <!-- Copyright 2013 the original author or authors.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License. --><!-- version: $Id$ -->

  
    <div class="section">
<h2><a name="Getting_Started"></a>Getting Started</h2>
      
<p>
        This chapter will show you in a few steps how to install and setup MyBatis-CDI.
      </p>

    
<div class="section">
<h3><a name="Installation"></a>Installation</h3>
      
<p>
        To use the MyBatis-CDI module, you just need to include the <tt>mybatis-cdi-1.0.0-beta3.jar</tt> 
        file and its dependencies in the classpath.
      </p>
      
<p>
        If you are using Maven just add the following dependency to your pom.xml:
      </p>
        
<div class="source"><pre class="prettyprint">
&lt;dependency&gt;
  &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
  &lt;artifactId&gt;mybatis-cdi&lt;/artifactId&gt;
  &lt;version&gt;1.0.0-beta3&lt;/version&gt;
&lt;/dependency&gt;</pre></div>
    </div>

    
<div class="section">
<h3><a name="Quick_Setup"></a>Quick Setup</h3>
    
      
<p>
        First, switch CDI on by adding a <tt>beans.xml</tt> file to your <tt>META-INF</tt> directory.
      </p>
    
      
<p>
        Next, to use MyBatis with CDI you need to provide at least two things: 
        an <tt>SqlSessionFactory</tt> and a CDI bean that requires a MyBatis mapper injection.
      </p>

      
<p>
        Create a producer method that returns an application scoped <tt>SqlSessionFactory</tt>:
      </p>

        
<div class="source"><pre class="prettyprint">
import javax.enterprise.inject.Produces;
import org.apache.ibatis.session.SqlSessionFactory;
        
public class SqlSessionFactoryProvider {

  @Produces
  @ApplicationScoped
  public SqlSessionFactory produceFactory() {
    SqlSessionFactory factory = create the factory instance ....
    return factory;
  }

}</pre></div>

      
<p>
        Assume you have a mapper interface defined like the following:
      </p>
        
<div class="source"><pre class="prettyprint">public interface UserMapper {
  @Select(&quot;SELECT * FROM users WHERE id = #userId&quot;)
  User getUser(@Param(&quot;userId&quot;) String userId);
} </pre></div>

      
<p>
        You can inject it into a CDI bean by just adding the <tt>@Mapper</tt> annotation to the injection point:
      </p>

        
<div class="source"><pre class="prettyprint">
import javax.inject.Inject;
import org.mybatis.cdi.Mapper;
        
public class FooServiceImpl implements FooService {

@Inject @Mapper private UserMapper userMapper;

public User doSomeStuff(String userId) {
  return this.userMapper.getUser(userId);
}</pre></div>
      </div>
    </div>
  

                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2010&#x2013;2015
                        <a href="http://www.mybatis.org/">MyBatis.org</a>.
            All rights reserved.      
                    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
